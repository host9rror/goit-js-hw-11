{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export async function imageSearch(value) {\n  const API = '43068097-aa3ed59823608d0655ab40c7d';\n  const defaultURL = \"https://pixabay.com/api/\";\n\n  const options = {\n    method: 'GET',\n  };\n\n  const params = new URLSearchParams({\n    key: API,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true\n  });\n\n  const URL = `${defaultURL}?${params.toString()}`;\n\n\n  return fetch(URL, options)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(\"Error\");\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.totalHits === 0) {\n        return null;\n      }\n      return data;\n    })\n    .catch(error => {\n      return error;\n    });\n}\n","// render-functions.js\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imageSearch } from \"./pixabay-api\";\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\n\nexport function renderImages(data, galleryImages) {\n  if (!Array.isArray(data)) {\n    console.error(Error);\n    return;\n  }\n\n  const galleryMarkup = data\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n      return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            data-source=\"${largeImageURL}\"\n            alt=\"${tags}\"\n          />\n          <ul class=\"gallery-description\">\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Likes</h3><p>${likes}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Views</h3><p>${views}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Comments</h3><p>${comments}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Downloads</h3><p>${downloads}</p></div></li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n\n  if (galleryImages) { \n    galleryImages.innerHTML = galleryMarkup;\n  } else {\n    console.error(Error);\n  }\n}\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { imageSearch } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', event => {\n    event.preventDefault();\n\n    galleryImages.innerHTML = '';\n    const query = event.target.querySelector('#search-input').value.trim();\n\n    if (query) {\n        // Показываем лоадер перед началом поиска\n        loader.classList.add('loading'); // Добавляем класс \"loading\", чтобы лоадер начал крутиться\n\n        imageSearch(query)\n          .then(data => {\n            if (data === null) {\n                iziToast.error({\n                  position: \"topRight\",\n                  title: '❌',\n                  icon: '',\n                  message: \"Sorry, there are no images matching your search query. Please try again!\",\n                });\n            } else {\n                renderImages(data.hits, galleryImages);\n            }\n          })\n          .catch(error => {\n            console.error(error);\n          })\n          .finally(() => {\n            // Скрываем лоадер после завершения всех операций (независимо от результата)\n            loader.classList.remove('loading'); // Убираем класс \"loading\", чтобы лоадер перестал крутиться\n          });\n    } \n    event.target.reset();\n})\n"],"names":["imageSearch","value","API","defaultURL","options","params","URL","response","data","error","SimpleLightbox","renderImages","galleryImages","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loader","event","query","iziToast"],"mappings":"6vBAAO,eAAeA,EAAYC,EAAO,CACvC,MAAMC,EAAM,qCACNC,EAAa,2BAEbC,EAAU,CACd,OAAQ,KACZ,EAEQC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKK,EAAM,GAAGH,CAAU,IAAIE,EAAO,SAAU,CAAA,GAG9C,OAAO,MAAMC,EAAKF,CAAO,EACtB,KAAKG,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,OAAO,EAEzB,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GACAA,EAAK,YAAc,EACd,KAEFA,CACR,EACA,MAAMC,GACEA,CACR,CACL,CC7BiB,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAaH,EAAMI,EAAe,CAChD,GAAI,CAAC,MAAM,QAAQJ,CAAI,EAAG,CACxB,QAAQ,MAAM,KAAK,EACnB,MACD,CAED,MAAMK,EAAgBL,EACnB,IAAI,CAAC,CAAE,aAAAM,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAC1D;AAAA,wCAC2BL,CAAa;AAAA;AAAA,mBAElCD,CAAY;AAAA,2BACJC,CAAa;AAAA,mBACrBC,CAAI;AAAA;AAAA;AAAA,oFAG6DC,CAAK;AAAA,oFACLC,CAAK;AAAA,uFACFC,CAAQ;AAAA,wFACPC,CAAS;AAAA;AAAA;AAAA,YAI5F,EACA,KAAK,EAAE,EAENR,EACFA,EAAc,UAAYC,EAE1B,QAAQ,MAAM,KAAK,CAEvB,CCpCA,MAAMQ,EAAa,SAAS,cAAc,cAAc,EAClDT,EAAgB,SAAS,cAAc,UAAU,EACjDU,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAW,iBAAiB,SAAUE,GAAS,CAC3CA,EAAM,eAAc,EAEpBX,EAAc,UAAY,GAC1B,MAAMY,EAAQD,EAAM,OAAO,cAAc,eAAe,EAAE,MAAM,OAE5DC,IAEAF,EAAO,UAAU,IAAI,SAAS,EAE9BtB,EAAYwB,CAAK,EACd,KAAKhB,GAAQ,CACRA,IAAS,KACTiB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,IACP,KAAM,GACN,QAAS,0EAC3B,CAAiB,EAEDd,EAAaH,EAAK,KAAMI,CAAa,CAErD,CAAW,EACA,MAAMH,GAAS,CACd,QAAQ,MAAMA,CAAK,CAC/B,CAAW,EACA,QAAQ,IAAM,CAEba,EAAO,UAAU,OAAO,SAAS,CAC7C,CAAW,GAEPC,EAAM,OAAO,OACjB,CAAC"}